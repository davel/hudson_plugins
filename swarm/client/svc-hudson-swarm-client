#!/bin/bash
# shell script called by SMF to run a Hudson swarm client as a service.
# placed in /lib/svc/method
vmopts="$(svcprop -p hudson/jvm_options $SMF_FMRI)"
opts="$(svcprop -p hudson/options $SMF_FMRI)"

# generate unique name. 
name=$(hostname)-$(cat /dev/urandom | tr -cd '[:alpha:]' | head -c 8)
exec java $vmopts -jar /var/lib/hudson/hudson-swarm-client.jar -name $name
