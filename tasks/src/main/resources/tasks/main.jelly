<j:jelly xmlns:j="jelly:core" xmlns:st="jelly:stapler" xmlns:d="jelly:define"
  xmlns:l="/lib/layout" xmlns:t="/lib/hudson" xmlns:f="/lib/form"
  xmlns:i="jelly:fmt" xmlns:local="local">
  <j:if test="${it.hasAnnotations()}">
    <script type="text/javascript" src="${rootURL}/plugin/tasks/yui/utilities.js"></script>
    <script type="text/javascript" src="${rootURL}/plugin/tasks/yui/tabview-min.js"></script>
    <script type="text/javascript" src="${rootURL}/plugin/tasks/yui/dispatcher-min.js"></script>

    <script type="text/javascript">
      var myTabs = new YAHOO.widget.TabView("statistics");

      <j:if test="${it.container.modules.size() > 1}">
        YAHOO.plugin.Dispatcher.delegate (new YAHOO.widget.Tab({
            label: '${%Modules} (${it.container.modules.size()})',
            dataSrc: 'tab.modules',
            cacheData: true,
            active: false
        }), myTabs);
      </j:if>
      <j:if test="${it.container.packages.size() > 1}">
        YAHOO.plugin.Dispatcher.delegate (new YAHOO.widget.Tab({
            label: '${%Packages} (${it.container.packages.size()})',
            dataSrc: 'tab.packages',
            cacheData: true,
            active: false
        }), myTabs);
    </j:if>
    <j:if test="${it.container.files.size() > 1}">
        YAHOO.plugin.Dispatcher.delegate (new YAHOO.widget.Tab({
            label: '${%Files} (${it.container.files.size()})',
            dataSrc: 'tab.files',
            cacheData: true,
            active: false
        }), myTabs);
    </j:if>
    <j:if test="${it.container.numberOfAnnotations > 1}">
        YAHOO.plugin.Dispatcher.delegate (new YAHOO.widget.Tab({
            label: '${%Tasks} (${it.container.numberOfAnnotations})',
            dataSrc: 'tab.tasks.warnings',
            cacheData: true,
            active: false
        }), myTabs);
    </j:if>
    <j:if test="${it.container.highAnnotations.size() > 0 and it.container.highAnnotations.size() != it.container.numberOfAnnotations}">
        YAHOO.plugin.Dispatcher.delegate (new YAHOO.widget.Tab({
            label: '${%High} (${it.container.highAnnotations.size()})',
            dataSrc: 'tab.tasks.high',
            cacheData: true,
            active: false
        }), myTabs);
    </j:if>
    <j:if test="${it.container.normalAnnotations.size() > 0 and it.container.normalAnnotations.size() != it.container.numberOfAnnotations}">
        YAHOO.plugin.Dispatcher.delegate (new YAHOO.widget.Tab({
            label: '${%Normal} (${it.container.normalAnnotations.size()})',
            dataSrc: 'tab.tasks.normal',
            cacheData: true,
            active: false
        }), myTabs);
    </j:if>
    <j:if test="${it.container.lowAnnotations.size() > 0 and it.container.lowAnnotations.size() != it.container.numberOfAnnotations}">
        YAHOO.plugin.Dispatcher.delegate (new YAHOO.widget.Tab({
            label: '${%Low} (${it.container.lowAnnotations.size()})',
            dataSrc: 'tab.tasks.low',
            cacheData: true,
            active: false
        }), myTabs);
    </j:if>

     myTabs.set('activeIndex', 0);
    </script>

    <st:include page="/tabview/css.jelly" />

    <h2>${%Details}</h2>
    <div id="statistics" class="yui-navset">
    </div>
  </j:if>
</j:jelly>