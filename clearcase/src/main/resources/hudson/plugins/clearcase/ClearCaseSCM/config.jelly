<j:jelly xmlns:j="jelly:core" xmlns:st="jelly:stapler" xmlns:d="jelly:define" xmlns:l="/lib/layout" xmlns:t="/lib/hudson" xmlns:f="/lib/form">

  	<f:entry title="View name" help="/plugin/clearcase/localdir.html">
  		<f:textbox name="cc.viewname" value="${h.defaulted(scm.viewName, 'hudson_view')}"
			checkUrl="'${rootURL}/scm/ClearCaseSCM/mandatoryCheck?errorText='+escape('Entering a view name is mandatory')+'&amp;value='+escape(this.value)" />     
    </f:entry>

	<f:entry title="Config spec" help="/plugin/clearcase/configspec.html">
    	<f:textarea name="cc.configspec" value="${scm.configSpec}"
      		checkUrl="'${rootURL}/scm/ClearCaseSCM/configSpecCheck?value='+escape(this.value)"/>
  	</f:entry>
	
	<f:entry title="Use update">
		<f:checkbox name="cc.useupdate" checked="${h.defaultToTrue(scm.useUpdate)}"/>
      		If checked, Hudson will use 'cleartool update' whenever possible, making the build faster.
      		But this causes the artifacts from the previous build to remain when a new build starts.
	</f:entry>

	<f:entry title="Branch(es)" help="/plugin/clearcase/branch.html">
	  <f:expandableTextbox name="cc.branch" value="${scm.branch}"/>
	</f:entry>
	
	<f:advanced>
      <f:entry title="VOB path(s)" help="/plugin/clearcase/vobpaths.html">
        <f:expandableTextbox name="cc.vobpaths" value="${scm.vobPaths}"/>
      </f:entry>
      <f:entry title="Additional mkview arguments" help="/plugin/clearcase/mkviewoptionalparam.html">
        <f:expandableTextbox name="cc.mkviewoptionalparam" value="${scm.mkviewOptionalParam}"/>
      </f:entry>
      <f:entry title="Filter 'Destroy sub branch' event" help="/plugin/clearcase/filteroutdestroysubbranchevent.html">
		<f:checkbox name="cc.filterOutDestroySubBranchEvent" checked="${scm.filteringOutDestroySubBranchEvent}"/>
      			If checked, Hudson will filter out <i>'Destroy sub-branch "BRANCHNAME" of branch'</i> events when polling
      			and retrieving change logs from a ClearCase repository.
	  </f:entry>
      <f:block>
        <table>

        <f:optionalBlock name="cc.usedynamicview" title="Use existing dynamic view"
            checked="${scm.useDynamicView}" help="/plugin/clearcase/dynamicview.html">
            
          <f:entry title="View root" help="/plugin/clearcase/viewdrive.html">
          	<j:choose>
          		<j:when test="${h.isWindows()}">
            		<f:textbox name="cc.viewdrive" value="${h.defaulted(scm.viewDrive, 'M:\')}"/>
            	</j:when>
            	<j:otherwise>
            		<f:textbox name="cc.viewdrive" value="${h.defaulted(scm.viewDrive, '/view')}"/>
            	</j:otherwise>
            </j:choose>
          </f:entry>
          
        </f:optionalBlock>
      </table>
	</f:block>
	</f:advanced>
</j:jelly>